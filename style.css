/* ==========================================================================
   THEME TOKENS / CSS VARIABLES
   ========================================================================== */
:root{
  --brand-primary:#e63946; --brand-primary-600:#d62839;
  --brand-bg:#fff; --card-bg:#fff; --output-bg:#fff;
  --brand-soft:#fff5f5; --brand-border:#f5c2c7; --note-bg:#fff8f8;
  --ink:#2d2d2d; --ink-muted:#666;
  --ok:#16a34a; --ok-b:#bbf7d0; --warn:#d97706; --warn-b:#fde68a;
  --shadow:0 8px 24px rgba(0,0,0,.06); --radius:14px;
}
html[data-theme="dark"]{
  --brand-bg:#0A0F1C; --card-bg:#0f172a; --output-bg:#0b1220;
  --brand-soft:#0b1220; --brand-border:#23324A; --note-bg:rgba(59,130,246,.06);
  --ink:#E5E7EB; --ink-muted:#94a3b8; --shadow:0 10px 30px rgba(0,0,0,.25);
}

/* Base */
*{box-sizing:border-box}
html,body{height:100%;background:var(--brand-bg);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto,Arial}
body{margin:0;min-height:100vh}

/* ==========================================================================
   TOP BAR
   ========================================================================== */
.appbar{
  background:var(--brand-primary);color:#fff;padding:14px 22px;
  display:flex;align-items:center;gap:12px;position:sticky;top:0;z-index:10;
  box-shadow:0 2px 10px rgba(0,0,0,.06)
}
.appbar img{height:32px;width:auto;display:block}
.app-title{
  font-weight:700;font-size:clamp(16px,1.8vw,18px);margin-right:auto
}
.chip,.lang-btn,.icon-btn{
  background:#fff;color:#a61b26;border:1px solid #fecdd3;
  padding:6px 10px;border-radius:999px;cursor:pointer;font-weight:600
}
.chip:hover,.lang-btn:hover,.icon-btn:hover{background:#fff5f5}
.icon-btn{width:32px;height:32px;display:grid;place-items:center;font-weight:800;padding:0}

/* ==========================================================================
   PAGE LAYOUT
   ========================================================================== */
.container{max-width:1640px;margin:28px auto;padding:0 20px;display:grid;gap:18px}
.inline-toolbar{display:flex;gap:10px;flex-wrap:wrap}
.btn-ghost{background:transparent;color:var(--brand-primary);border:1px solid var(--brand-border)}
.btn-ghost:hover{background:var(--brand-soft)}

.lanes{display:grid;grid-template-columns:repeat(1,minmax(520px,1fr));gap:18px}
.lanes.cols-2{grid-template-columns:repeat(2,minmax(520px,1fr))}
.lanes.cols-3{grid-template-columns:repeat(3,minmax(500px,1fr))}
.lane-title{font-weight:800;color:var(--brand-primary);margin:2px 0 0 2px}

@media (max-width:1200px){
  .lanes, .lanes.cols-2, .lanes.cols-3{
    grid-template-columns:repeat(auto-fit,minmax(360px,1fr));
  }
}
@media (max-width:700px){
  .lanes, .lanes.cols-2, .lanes.cols-3{
    grid-template-columns:1fr;
  }
}

/* Cards */
.card{
  background:var(--card-bg);border:1px solid var(--brand-border);
  border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)
}
.card h2{margin:6px 0 10px;color:var(--brand-primary);font-size:18px}
.sub{color:var(--ink-muted);font-size:14px;margin-top:-2px}
.note{
  margin-top:10px;font-size:13px;color:var(--ink);background:var(--note-bg);
  border:1px dashed var(--brand-border);padding:10px 12px;border-radius:10px
}

/* ==========================================================================
   FORM CONTROLS
   ========================================================================== */
.controls{display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:10px;align-items:end;margin-top:12px}
@media (max-width:1100px){
  .controls{grid-template-columns:1fr 1fr}
  .controls .btn{grid-column:1/-1}
}
@media (max-width:640px){
  .controls{grid-template-columns:1fr}
}

.field label{display:block;font-size:13px;color:var(--ink-muted);margin-bottom:6px}

/* Existing inputs */
.field input[type=number], .field select{
  width:100%;padding:10px 12px;font-size:16px;border:1px solid var(--brand-border);
  border-radius:10px;background:#fff;color:#222;transition:border-color .15s,box-shadow .15s
}
html[data-theme="dark"] .field input[type=number],
html[data-theme="dark"] .field select{background:#0b1220;color:#E5E7EB}
.field input[type=number]:focus, .field select:focus{
  border-color:var(--brand-primary);box-shadow:0 0 0 3px rgba(230,57,70,.15)
}

/* NEW, text input and textarea */
.field input[type=text], .field textarea{
  width:100%;padding:10px 12px;font-size:16px;border:1px solid var(--brand-border);
  border-radius:10px;background:#fff;color:#222;transition:border-color .15s,box-shadow .15s
}
html[data-theme="dark"] .field input[type=text],
html[data-theme="dark"] .field textarea{background:#0b1220;color:#E5E7EB}
.field input[type=text]:focus, .field textarea:focus{
  border-color:var(--brand-primary);box-shadow:0 0 0 3px rgba(230,57,70,.15);outline:none
}
.field textarea{
  white-space:pre-wrap;
  font-family:ui-monospace,Menlo,Consolas,monospace;
  resize:vertical;
}

/* Buttons */
.btn{padding:11px 16px;border-radius:10px;border:none;background:var(--brand-primary);color:#fff;font-weight:600;cursor:pointer;transition:background .2s}
.btn:hover{background:var(--brand-primary-600)}

/* Offer modal layout, keep same style */
.offer-controls{grid-template-columns:1fr 1fr 1fr auto}
@media (max-width:1100px){
  .offer-controls{grid-template-columns:1fr 1fr}
  .offer-controls .btn{grid-column:1/-1}
}
@media (max-width:640px){
  .offer-controls{grid-template-columns:1fr}
}

/* ==========================================================================
   KPIs / TOTAL BANNER
   ========================================================================== */
.kpi-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px;margin:12px 0 6px}
.kpi{background:var(--brand-soft);border:1px solid var(--brand-border);border-radius:10px;padding:12px}
.kpi .label{font-size:12px;color:var(--ink-muted)}
.kpi .value{font-weight:700;font-size:18px;margin-top:4px}
.total{margin-top:12px;padding:12px;border-radius:10px;font-weight:800;background:#f0fdf4;color:var(--ok);border:1px solid var(--ok-b)}
.total.warn{background:#fff7ed;border-color:var(--warn-b);color:var(--warn)}

/* Simulation output */
.output{
  white-space:pre-wrap;font-family:ui-monospace,Menlo,Consolas,monospace;
  background:var(--output-bg);border:1px solid var(--brand-border);
  border-radius:12px;padding:16px;line-height:1.6;color:var(--ink)
}

/* ==========================================================================
   MODALS
   ========================================================================== */
.modal{position:fixed;inset:0;display:none}
.modal.open{display:block}
.modal .backdrop{position:absolute;inset:0;background:rgba(0,0,0,.35)}
.modal .dialog{
  position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
  width:min(1100px,92vw);max-height:85vh;overflow:auto;background:var(--card-bg);color:var(--ink);
  border:1px solid var(--brand-border);border-radius:14px;box-shadow:var(--shadow)
}
@media (max-width:640px){
  .modal .dialog{
    width:96vw;max-height:92vh;border-radius:10px;
  }
}
.modal .head{display:flex;align-items:center;gap:12px;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--brand-border);background:var(--brand-soft)}
.modal .head h3{margin:0;color:var(--brand-primary)}
.close-x{border:none;background:transparent;color:var(--ink);font-size:20px;cursor:pointer;padding:6px 10px;border-radius:8px}
.close-x:hover{background:rgba(0,0,0,.06)}
.modal .body{padding:16px}

/* Pricing tables */
.price-table{width:100%;border-collapse:separate;border-spacing:0}
.price-table th{background:var(--brand-primary);color:#fff;text-align:left;padding:10px 12px;font-weight:700}
.price-table td{padding:10px 12px;border-left:1px solid var(--brand-border);border-bottom:1px solid var(--brand-border)}
.price-table th:first-child{border-top-left-radius:8px}
.price-table th:last-child{border-top-right-radius:8px}
.price-table tr:last-child td:first-child{border-bottom-left-radius:8px}
.price-table tr:last-child td:last-child{border-bottom-right-radius:8px}
.muted{color:var(--ink-muted);font-size:13px}
.badge{display:inline-block;padding:3px 8px;border-radius:999px;border:1px solid var(--ok-b);background:#f0fdf4;color:var(--ok);font-weight:700;font-size:12px}


/* Offer language toggle (FR/EN) next to company name */
.companyRow{
  display:flex;
  gap:10px;
  align-items:center;
}

.langToggle{
  display:inline-flex;
  border:1px solid var(--brand-border);
  border-radius:10px;
  overflow:hidden;
  background:var(--card-bg);
}

.langOpt{
  padding:10px 12px;
  border:0;
  background:transparent;
  cursor:pointer;
  font-weight:800;
  color:var(--ink);
}

.langOpt + .langOpt{
  border-left:1px solid var(--brand-border);
}

.langOpt.isActive{
  background:var(--brand-primary);
  color:#fff;
}
